(this["webpackJsonptraffic-editor-pwa"]=this["webpackJsonptraffic-editor-pwa"]||[]).push([[0],{73:function(e,n,t){},81:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(8),i=t.n(c),o=(t(73),t(17)),s=t.n(o),l=t(26),u=t(24),j=t(116),b=t(127),f=t(128),d=t(36),h=t(129),x=t(60),p=t.n(x),O=t(132),m=t(130),v=t(61),g=t(55),k=t(133),w=t(123),y=t(124),C=t(126),S=t(118),B=t(120),M=t(82),z=t(121),N=t(122),E=t(57),D=t.n(E),F=t(125),A=t(5),J=Object(j.a)((function(e){return{directoryButton:{fontSize:e.typography.h5.fontSize},filename:{fontSize:e.typography.h5.fontSize,textDecoration:"underline"},dialog:{backgroundColor:e.palette.background.paper}}}));function T(e){var n=J(e),t=a.a.useState([]),r=Object(u.a)(t,2),c=r[0],i=r[1],o=a.a.useState(),j=Object(u.a)(o,2),b=j[0],f=j[1],d=function(){var e=Object(l.a)(s.a.mark((function e(){var n,t,r,a,c,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i([]),e.next=3,window.showDirectoryPicker();case 3:return n=e.sent,e.next=6,f(n);case 6:t=!0,r=!1,e.prev=8,c=function(){var e=u;e.name.endsWith(".building.yaml")&&i((function(n){return[].concat(Object(v.a)(n),[e.name])}))},o=Object(g.a)(n.values());case 11:return e.next=13,o.next();case 13:return l=e.sent,t=l.done,e.next=17,l.value;case 17:if(u=e.sent,t){e.next=23;break}c();case 20:t=!0,e.next=11;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),r=!0,a=e.t0;case 29:if(e.prev=29,e.prev=30,t||null==o.return){e.next=34;break}return e.next=34,o.return();case 34:if(e.prev=34,!r){e.next=37;break}throw a;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[8,25,29,39],[30,,34,38]])})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(k.a,{open:e.open,onClose:e.onCancel,children:[Object(A.jsx)(w.a,{children:"Open Building Map"}),Object(A.jsxs)(y.a,{className:n.dialog,children:[Object(A.jsx)(F.a,{variant:"contained",color:"primary",onClick:d,children:"Select Directory..."}),function(){if(c.length>0)return Object(A.jsx)("div",{children:Object(A.jsx)(S.a,{subheader:Object(A.jsx)(B.a,{component:"div",children:"Available Files"}),children:c.map((function(n){return Object(A.jsxs)(M.a,{button:!0,children:[Object(A.jsx)(z.a,{children:Object(A.jsx)(D.a,{})}),Object(A.jsx)(N.a,{primary:n,onClick:function(t){return e.onOpen(n,b)}})]})}))})})}()]}),Object(A.jsx)(C.a,{children:Object(A.jsx)(F.a,{onClick:e.onCancel,color:"primary",children:"Cancel"})})]})}var _=t(58),G=t(59),H=function(){function e(){Object(_.a)(this,e),this.xml="",this.filename=""}return Object(G.a)(e,[{key:"load_file",value:function(){var e=Object(l.a)(s.a.mark((function e(n,t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.filename=n,e.next=3,t.getFileHandle(n);case 3:return r=e.sent,e.next=6,r.getFile();case 6:return a=e.sent,e.next=9,a.text();case 9:return this.xml=e.sent,e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}()}]),e}();function I(e){return Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{children:e.building.filename}),e.building.xml]})}var L=Object(j.a)((function(e){return{root:{flexGrow:1},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},toolbarMargin:e.mixins.toolbar}}));function P(e){var n=a.a.useState(null),t=Object(u.a)(n,2),r=t[0],c=t[1],i=a.a.useState(!1),o=Object(u.a)(i,2),j=o[0],x=o[1],v=a.a.useState(new H),g=Object(u.a)(v,2),k=g[0],w=(g[1],L(e)),y=function(){var e=Object(l.a)(s.a.mark((function e(n,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!1),!t){e.next=4;break}return e.next=4,k.load_file(n,t);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:w.root,children:[Object(A.jsx)(b.a,{position:"fixed",children:Object(A.jsxs)(f.a,{children:[Object(A.jsx)(h.a,{className:w.menuButton,color:"inherit","aria-label":"Menu",onClick:function(e){c(e.currentTarget)},children:Object(A.jsx)(p.a,{})}),Object(A.jsx)(O.a,{keepMounted:!0,anchorEl:r,open:Boolean(r),onClose:function(){c(null)},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(A.jsx)(m.a,{onClick:function(){x(!0),c(null)},children:"Open Building Map"})}),Object(A.jsx)(d.a,{variant:"h5",color:"inherit",className:w.flex,children:"Traffic Editor"})]})}),Object(A.jsx)("div",{className:w.toolbarMargin}),Object(A.jsx)(T,{open:j,onOpen:y,onCancel:function(){x(!1)}}),Object(A.jsx)(I,{building:k}),!k.filename&&Object(A.jsx)("div",{children:"Click the menu icon above to load a building."})]})}i.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(P,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.d5861258.chunk.js.map